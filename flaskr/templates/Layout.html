<!DOCTYPE html>
<html lang="en">

    <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}Document{% endblock %}</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.14.0/css/all.css">
    <link rel="stylesheet" href="../static/css/toast_style.css">

    <!-- Small custom CSS to mimic Grafana-like dark layout -->
    <style>
        :root{
        --grafana-bg: #0f1724;
        --panel-bg: #111827;
        --muted: #9ca3af;
        --accent: #f78c6b;
        --panel-radius: 6px;
        }

        html,body{
        height:100%;
        margin:0;
        font-family: "Inter", "Helvetica Neue", Arial, sans-serif;
        background: linear-gradient(180deg, #071027 0%, #061323 100%);
        color: #e6eef6;
        }
        .topbar {
        height:56px;
        background: linear-gradient(90deg, rgba(25,29,34,1) 0%, rgba(12,17,23,0.9) 100%);
        border-bottom: 1px solid rgba(255,255,255,0.03);
        display:flex;
        align-items:center;
        padding: 0 16px;
        position: fixed;
        top:0;
        left:0;
        right:0;
        z-index: 1030;
        }
        .topbar .brand {
        display:flex;
        align-items:center;
        gap:10px;
        color:var(--accent);
        font-weight:600;
        text-decoration:none;
        }
        .topbar .brand .logo {
        width:28px; height:28px;
        border-radius:4px;
        background: linear-gradient(135deg,#ff7b4a,#ffce5c);
        display:inline-block;
        }
        .topbar .nav-actions { margin-left:auto; display:flex; align-items:center; gap:12px; }

        .app-shell { display:flex; padding-top:56px; min-height: calc(100vh - 56px); }
        .sidebar {
        width:220px;
        background: linear-gradient(180deg,#0b1220, #071025);
        border-right:1px solid rgba(255,255,255,0.03);
        padding:16px 8px;
        box-sizing:border-box;
        }
        .sidebar .nav-link {
        color:#cbd5e1;
        padding:10px 14px;
        border-radius:6px;
        display:block;
        text-decoration:none;
        font-size:14px;
        }
        .sidebar .nav-link:hover { background: rgba(255,255,255,0.03); color: #fff; }
        .sidebar .nav-link.active { background: rgba(247,140,107,0.08); color: var(--accent); }

        .content {
        flex:1;
        padding:20px;
        box-sizing:border-box;
        }
        .panel {
        background: var(--panel-bg);
        border-radius: var(--panel-radius);
        padding: 16px;
        border: 1px solid rgba(255,255,255,0.03);
        margin-bottom:16px;
        }
        .panel .panel-title {
        display:flex;
        align-items:center;
        gap:8px;
        margin-bottom:12px;
        font-weight:600;
        color:#e6eef6;
        }
        .panel .panel-sub {
        color: var(--muted);
        font-size:13px;
        }
        .table thead th {
        color: #cbd5e1;
        border-bottom: 1px solid rgba(255,255,255,0.04);
        font-weight:600;
        background: transparent;
        }
        .table tbody td {
        color:#dbeafe;
        vertical-align: middle;
        }
        .btn-compact { padding: 4px 8px; font-size:13px; }
        @media (max-width: 768px) {
        .sidebar { display:none; width:0; }
        .topbar .brand { gap:8px; }
        .content { padding:12px; }
        }
    </style>
    </head>

    <body>

    <header class="topbar">
        <a class="brand" href="/analyze">
        <span class="logo" aria-hidden="true"></span>
        <span style="font-size:15px">Analyzer</span>
        </a>

        <div class="nav-actions">

        <a class="btn btn-sm btn-outline-light btn-compact" href="/analyze"><i class="fas fa-play-circle"></i>&nbsp;Analyze</a>
        <a class="btn btn-sm btn-outline-light btn-compact" href="/jobs"><i class="fas fa-list"></i>&nbsp;Jobs</a>
        <a class="btn btn-sm btn-outline-light btn-compact" href="/logout"><i class="fas fa-sign-out-alt"></i>&nbsp;Sign out</a>
        </div>
    </header>

    <div class="toast-container" id="toast-container"></div>
    <div class="app-shell">

        <aside class="sidebar">
        <div style="padding:10px 12px; margin-bottom:6px; color:var(--muted); font-size:12px;">MENU</div>
        <a class="nav-link {% if request.path == '/analyze' %}active{% endif %}" href="/analyze"><i class="fas fa-home"></i> &nbsp; Home</a>
        <a class="nav-link {% if request.path == '/jobs' %}active{% endif %}" href="/jobs"><i class="fas fa-file-alt"></i> &nbsp; Jobs</a>
        <a class="nav-link" href="/results"><i class="fas fa-chart-line"></i> &nbsp; Results</a>
        <a class="nav-link" href="/metrics"><i class="fas fa-tachometer-alt"></i> &nbsp; Metrics</a>

        <hr style="border-color: rgba(255,255,255,0.03); margin:12px 8px;">
        <div style="padding:8px 12px; color: var(--muted); font-size:12px;">ACCOUNT</div>
        <div style="padding:0 12px 12px 12px; color:#cbd5e1; font-size:14px;">{{ current_user.username if current_user.is_authenticated else 'Guest' }}</div>
        </aside>


        <main class="content">
        <div class="container-fluid px-0">
            <div class="panel" style="display:flex; justify-content:space-between; align-items:center;">
            <div>
                <div style="font-size:18px; font-weight:700;">{% block name %}{% endblock %}</div>
                <div class="panel-sub">Analytics & replay for uploaded logs</div>
            </div>
            <div>
                {% block page_actions %}{% endblock %}
            </div>
            </div>
            {% block content %}{% endblock %}
        </div>
        </main>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
    <script id="flash-messages" type="application/json">
        {{ get_flashed_messages(with_categories=true) | tojson | safe }}
    </script>
    <script src="../static/js/toast_msg.js"></script>
    </body>

</html>